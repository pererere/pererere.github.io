<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FoodLink: D:/GIT/FoodLink/foodlink.client/node_modules/@discoveryjs/json-ext Directory Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">FoodLink
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('dir_0573da34a0488673c8b798b5a74d7098.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">json-ext Directory Reference</div></div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p><a href="https://www.npmjs.com/package/@discoveryjs/json-ext"><img src="https://img.shields.io/npm/v/@discoveryjs/json-ext.svg" alt="NPM version" style="pointer-events: none;" class="inline"/></a> <a href="https://github.com/discoveryjs/json-ext/actions/workflows/ci.yml"><img src="https://github.com/discoveryjs/json-ext/actions/workflows/ci.yml/badge.svg" alt="Build Status" style="pointer-events: none;" class="inline"/></a> <a href="https://coveralls.io/github/discoveryjs/json-ext?"><img src="https://coveralls.io/repos/github/discoveryjs/json-ext/badge.svg?branch=master" alt="Coverage Status" style="pointer-events: none;" class="inline"/></a> <a href="https://www.npmjs.com/package/@discoveryjs/json-ext"><img src="https://img.shields.io/npm/dm/@discoveryjs/json-ext.svg" alt="NPM Downloads" style="pointer-events: none;" class="inline"/></a></p>
<p>A set of utilities that extend the use of JSON. Designed to be fast and memory efficient</p>
<p>Features:</p>
<ul class="check">
<li class="checked"><code>parseChunked()</code> – Parse JSON that comes by chunks (e.g. FS readable stream or fetch response stream)</li>
</ul>
<ul class="check">
<li class="checked"><code>stringifyStream()</code> – Stringify stream (Node.js)</li>
</ul>
<ul class="check">
<li class="checked"><code>stringifyInfo()</code> – Get estimated size and other facts of JSON.stringify() without converting a value to string</li>
<li class="unchecked"><b>TBD</b> Support for circular references</li>
</ul>
<ul class="check">
<li class="unchecked"><b>TBD</b> Binary representation <a href="https://github.com/discoveryjs/json-ext/tree/binary">branch</a></li>
</ul>
<ul class="check">
<li class="unchecked"><b>TBD</b> WHATWG <a href="https://streams.spec.whatwg.org/">Streams</a> support</li>
</ul>
<h1><a class="anchor" id="autotoc_md493"></a>
Install</h1>
<div class="fragment"><div class="line">npm install @discoveryjs/json-ext</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md494"></a>
API</h1>
<ul>
<li>parseChunked(chunkEmitter)</li>
<li>stringifyStream(value[, replacer[, space]])</li>
<li>stringifyInfo(value[, replacer[, space[, options]]])<ul>
<li><a class="el" href="D:/GIT/FoodLink/foodlink.client/node_modules/node-forge/README.md#options">Options</a><ul>
<li>async</li>
<li>continueOnCircular</li>
</ul>
</li>
</ul>
</li>
<li>version</li>
</ul>
<h2><a class="anchor" id="autotoc_md495"></a>
parseChunked(chunkEmitter)</h2>
<p>Works the same as <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/parse"><code>JSON.parse()</code></a> but takes <code>chunkEmitter</code> instead of string and returns <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promise</a>.</p>
<blockquote class="doxtable">
<p>NOTE: <code>reviver</code> parameter is not supported yet, but will be added in next releases. NOTE: WHATWG streams aren't supported yet </p>
</blockquote>
<p>When to use:</p><ul>
<li>It's required to avoid freezing the main thread during big JSON parsing, since this process can be distributed in time</li>
<li>Huge JSON needs to be parsed (e.g. &gt;500MB on Node.js)</li>
<li>Needed to reduce memory pressure. <code>JSON.parse()</code> needs to receive the entire JSON before parsing it. With <code>parseChunked()</code> you may parse JSON as first bytes of it comes. This approach helps to avoid storing a huge string in the memory at a single time point and following GC.</li>
</ul>
<p><a href="https://github.com/discoveryjs/json-ext/tree/master/benchmarks#parse-chunked">Benchmark</a></p>
<p>Usage:</p>
<div class="fragment"><div class="line">const { parseChunked } = require(&#39;@discoveryjs/json-ext&#39;);</div>
<div class="line"> </div>
<div class="line">// as a regular Promise</div>
<div class="line">parseChunked(chunkEmitter)</div>
<div class="line">    .then(data =&gt; {</div>
<div class="line">        /* data is parsed JSON */</div>
<div class="line">    });</div>
<div class="line"> </div>
<div class="line">// using await (keep in mind that not every runtime has a support for top level await)</div>
<div class="line">const data = await parseChunked(chunkEmitter);</div>
</div><!-- fragment --><p>Parameter <code>chunkEmitter</code> can be:</p><ul>
<li><a href="https://nodejs.org/dist/latest-v14.x/docs/api/stream.html#stream_readable_streams"><code>ReadableStream</code></a> (Node.js only) <div class="fragment"><div class="line">const fs = require(&#39;fs&#39;);</div>
<div class="line">const { parseChunked } = require(&#39;@discoveryjs/json-ext&#39;);</div>
<div class="line"> </div>
<div class="line">parseChunked(fs.createReadStream(&#39;path/to/file.json&#39;))</div>
</div><!-- fragment --></li>
<li>Generator, async generator or function that returns iterable (chunks). Chunk might be a <code>string</code>, <code>Uint8Array</code> or <code>Buffer</code> (Node.js only): <div class="fragment"><div class="line">const { parseChunked } = require(&#39;@discoveryjs/json-ext&#39;);</div>
<div class="line">const encoder = new TextEncoder();</div>
<div class="line"> </div>
<div class="line">// generator</div>
<div class="line">parseChunked(function*() {</div>
<div class="line">    yield &#39;{ &quot;hello&quot;:&#39;;</div>
<div class="line">    yield Buffer.from(&#39; &quot;wor&#39;);    // Node.js only</div>
<div class="line">    yield encoder.encode(&#39;ld&quot; }&#39;); // returns Uint8Array(5) [ 108, 100, 34, 32, 125 ]</div>
<div class="line">});</div>
<div class="line"> </div>
<div class="line">// async generator</div>
<div class="line">parseChunked(async function*() {</div>
<div class="line">    for await (const chunk of someAsyncSource) {</div>
<div class="line">        yield chunk;</div>
<div class="line">    }</div>
<div class="line">});</div>
<div class="line"> </div>
<div class="line">// function that returns iterable</div>
<div class="line">parseChunked(() =&gt; [&#39;{ &quot;hello&quot;:&#39;, &#39; &quot;world&quot;}&#39;])</div>
</div><!-- fragment --></li>
</ul>
<p>Using with <a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API">fetch()</a>:</p>
<div class="fragment"><div class="line">async function loadData(url) {</div>
<div class="line">    const response = await fetch(url);</div>
<div class="line">    const reader = response.body.getReader();</div>
<div class="line"> </div>
<div class="line">    return parseChunked(async function*() {</div>
<div class="line">        while (true) {</div>
<div class="line">            const { done, value } = await reader.read();</div>
<div class="line"> </div>
<div class="line">            if (done) {</div>
<div class="line">                break;</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            yield value;</div>
<div class="line">        }</div>
<div class="line">    });</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">loadData(&#39;https://example.com/data.json&#39;)</div>
<div class="line">    .then(data =&gt; {</div>
<div class="line">        /* data is parsed JSON */</div>
<div class="line">    })</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md496"></a>
stringifyStream(value[, replacer[, space]])</h2>
<p>Works the same as <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify"><code>JSON.stringify()</code></a>, but returns an instance of <a href="https://nodejs.org/dist/latest-v14.x/docs/api/stream.html#stream_readable_streams"><code>ReadableStream</code></a> instead of string.</p>
<blockquote class="doxtable">
<p>NOTE: WHATWG Streams aren't supported yet, so function available for Node.js only for now </p>
</blockquote>
<p>Departs from JSON.stringify():</p><ul>
<li>Outputs <code>null</code> when <code>JSON.stringify()</code> returns <code>undefined</code> (since streams may not emit <code>undefined</code>)</li>
<li>A promise is resolving and the resulting value is stringifying as a regular one</li>
<li>A stream in non-object mode is piping to output as is</li>
<li>A stream in object mode is piping to output as an array of objects</li>
</ul>
<p>When to use:</p><ul>
<li>Huge JSON needs to be generated (e.g. &gt;500MB on Node.js)</li>
<li>Needed to reduce memory pressure. <code>JSON.stringify()</code> needs to generate the entire JSON before send or write it to somewhere. With <code>stringifyStream()</code> you may send a result to somewhere as first bytes of the result appears. This approach helps to avoid storing a huge string in the memory at a single time point.</li>
<li>The object being serialized contains Promises or Streams (see Usage for examples)</li>
</ul>
<p><a href="https://github.com/discoveryjs/json-ext/tree/master/benchmarks#stream-stringifying">Benchmark</a></p>
<p>Usage:</p>
<div class="fragment"><div class="line">const { stringifyStream } = require(&#39;@discoveryjs/json-ext&#39;);</div>
<div class="line"> </div>
<div class="line">// handle events</div>
<div class="line">stringifyStream(data)</div>
<div class="line">    .on(&#39;data&#39;, chunk =&gt; console.log(chunk))</div>
<div class="line">    .on(&#39;error&#39;, error =&gt; consold.error(error))</div>
<div class="line">    .on(&#39;finish&#39;, () =&gt; console.log(&#39;DONE!&#39;));</div>
<div class="line"> </div>
<div class="line">// pipe into a stream</div>
<div class="line">stringifyStream(data)</div>
<div class="line">    .pipe(writableStream);</div>
</div><!-- fragment --><p>Using Promise or ReadableStream in serializing object:</p>
<div class="fragment"><div class="line">const fs = require(&#39;fs&#39;);</div>
<div class="line">const { stringifyStream } = require(&#39;@discoveryjs/json-ext&#39;);</div>
<div class="line"> </div>
<div class="line">// output will be</div>
<div class="line">// {&quot;name&quot;:&quot;example&quot;,&quot;willSerializeResolvedValue&quot;:42,&quot;fromFile&quot;:[1, 2, 3],&quot;at&quot;:{&quot;any&quot;:{&quot;level&quot;:&quot;promise!&quot;}}}</div>
<div class="line">stringifyStream({</div>
<div class="line">    name: &#39;example&#39;,</div>
<div class="line">    willSerializeResolvedValue: Promise.resolve(42),</div>
<div class="line">    fromFile: fs.createReadStream(&#39;path/to/file.json&#39;), // support file content is &quot;[1, 2, 3]&quot;, it&#39;ll be inserted as it</div>
<div class="line">    at: {</div>
<div class="line">        any: {</div>
<div class="line">            level: new Promise(resolve =&gt; setTimeout(() =&gt; resolve(&#39;promise!&#39;), 100))</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">})</div>
<div class="line"> </div>
<div class="line">// in case several async requests are used in object, it&#39;s prefered</div>
<div class="line">// to put fastest requests first, because in this case</div>
<div class="line">stringifyStream({</div>
<div class="line">    foo: fetch(&#39;http://example.com/request_takes_2s&#39;).then(req =&gt; req.json()),</div>
<div class="line">    bar: fetch(&#39;http://example.com/request_takes_5s&#39;).then(req =&gt; req.json())</div>
<div class="line">});</div>
</div><!-- fragment --><p>Using with <a href="https://nodejs.org/dist/latest-v14.x/docs/api/stream.html#stream_writable_streams"><code>WritableStream</code></a> (Node.js only):</p>
<div class="fragment"><div class="line">const fs = require(&#39;fs&#39;);</div>
<div class="line">const { stringifyStream } = require(&#39;@discoveryjs/json-ext&#39;);</div>
<div class="line"> </div>
<div class="line">// pipe into a console</div>
<div class="line">stringifyStream(data)</div>
<div class="line">    .pipe(process.stdout);</div>
<div class="line"> </div>
<div class="line">// pipe into a file</div>
<div class="line">stringifyStream(data)</div>
<div class="line">    .pipe(fs.createWriteStream(&#39;path/to/file.json&#39;));</div>
<div class="line"> </div>
<div class="line">// wrapping into a Promise</div>
<div class="line">new Promise((resolve, reject) =&gt; {</div>
<div class="line">    stringifyStream(data)</div>
<div class="line">        .on(&#39;error&#39;, reject)</div>
<div class="line">        .pipe(stream)</div>
<div class="line">        .on(&#39;error&#39;, reject)</div>
<div class="line">        .on(&#39;finish&#39;, resolve);</div>
<div class="line">});</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md497"></a>
stringifyInfo(value[, replacer[, space[, options]]])</h2>
<p><code>value</code>, <code>replacer</code> and <code>space</code> arguments are the same as for <code>JSON.stringify()</code>.</p>
<p>Result is an object:</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    minLength: Number,  // minimal bytes when values is stringified</div>
<div class="line">    circular: [...],    // list of circular references</div>
<div class="line">    duplicate: [...],   // list of objects that occur more than once</div>
<div class="line">    async: [...]        // list of async values, i.e. promises and streams</div>
<div class="line">}</div>
</div><!-- fragment --><p>Example:</p>
<div class="fragment"><div class="line">const { stringifyInfo } = require(&#39;@discoveryjs/json-ext&#39;);</div>
<div class="line"> </div>
<div class="line">console.log(</div>
<div class="line">    stringifyInfo({ test: true }).minLength</div>
<div class="line">);</div>
<div class="line">// &gt; 13</div>
<div class="line">// that equals &#39;{&quot;test&quot;:true}&#39;.length</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md498"></a>
Options</h3>
<h4><a class="anchor" id="autotoc_md499"></a>
async</h4>
<p>Type: <code>Boolean</code> <br  />
 Default: <code>false</code></p>
<p>Collect async values (promises and streams) or not.</p>
<h4><a class="anchor" id="autotoc_md500"></a>
continueOnCircular</h4>
<p>Type: <code>Boolean</code> <br  />
 Default: <code>false</code></p>
<p>Stop collecting info for a value or not whenever circular reference is found. Setting option to <code>true</code> allows to find all circular references.</p>
<h2><a class="anchor" id="autotoc_md501"></a>
version</h2>
<p>The version of library, e.g. <code>"0.3.1"</code>.</p>
<h1><a class="anchor" id="autotoc_md502"></a>
License</h1>
<p>MIT </p>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_2819f17ffd536c76baa6d22c695599c9.html">GIT</a></li><li class="navelem"><a class="el" href="dir_7c2f69865df6d9deb87b81146fc3b4f6.html">FoodLink</a></li><li class="navelem"><a class="el" href="dir_060908b24f206e0870efcd71814665ad.html">foodlink.client</a></li><li class="navelem"><a class="el" href="dir_083bb234fa234c64f25ac45abfe72fc3.html">node_modules</a></li><li class="navelem"><a class="el" href="dir_30a21653bc678337154f448608adc277.html">@discoveryjs</a></li><li class="navelem"><a class="el" href="dir_0573da34a0488673c8b798b5a74d7098.html">json-ext</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
