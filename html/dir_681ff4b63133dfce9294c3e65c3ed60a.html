<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FoodLink: D:/GIT/FoodLink/foodlink.client/node_modules/typed-assert Directory Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">FoodLink
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('dir_681ff4b63133dfce9294c3e65c3ed60a.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">typed-assert Directory Reference</div></div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p><code>typed-assert</code> is a typesafe assertion library implementing the <a href="https://www.typescriptlang.org/docs/handbook/release-notes/typescript-3-7.html#assertion-functions">TS 3.7 Assertion Functions</a> API, without external dependencies.</p>
<p>See the <a class="el" href="md__d_1_2_g_i_t_2_food_link_2foodlink_8client_2node__modules_2typed-assert_2_a_p_i.html">documentation</a>.</p>
<h2><a class="anchor" id="autotoc_md21164"></a>
Consider using <a href="https://github.com/colinhacks/zod"><code>zod</code></a></h2>
<p>While this library does a fine job for most simple use cases, please consider using <a href="https://github.com/colinhacks/zod"><code>zod</code></a> if you need more complex assertions.</p>
<h2><a class="anchor" id="autotoc_md21165"></a>
Install</h2>
<div class="fragment"><div class="line">install typed-assert</div>
</div><!-- fragment --><p>or</p>
<div class="fragment"><div class="line">add typed-assert</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md21166"></a>
Why is it useful?</h2>
<p><code>typed-assert</code> promotes using <code>unknown</code> instead of <code>any</code> for "untrusted" values, e.g. user input, while still benefiting from incremental typing.</p>
<p>For example, <code>JSON.stringify</code> returns <code>any</code>, which is not typesafe. With <code>typed-assert</code>, we can instead treat the result as <code>unknown</code> and gradually check the contents at runtime and still get correct type inference:</p>
<div class="fragment"><div class="line">import * as t from &quot;typed-assert&quot;;</div>
<div class="line"> </div>
<div class="line">const parseConfigFile = (file: string): { readonly a: string, readonly b: number } =&gt; {</div>
<div class="line">  const contents = JSON.parse(fs.readFileSync(file, { encoding: &#39;utf8&#39;})) as unknown;</div>
<div class="line">  // contents is &quot;unknown&quot; instead of any, because we don&#39;t trust the input yet</div>
<div class="line">  t.isRecord(contents);</div>
<div class="line">  // contents is &quot;Record&lt;string, unknown&gt;&quot;</div>
<div class="line">  t.isString(contents.a);</div>
<div class="line">  // contents.a is &quot;string&quot;</div>
<div class="line">  t.isNumber(contents.b):</div>
<div class="line">  // contents.b is &quot;number&quot;;</div>
<div class="line">  return {</div>
<div class="line">    a: contents.a,</div>
<div class="line">    b: contents.b,</div>
<div class="line">  }; // correctly typed</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md21167"></a>
How is it different from chai, jest.expect, etc?</h2>
<p><code>typed-assert</code> is both a compile-time and runtime assert library. It leverages the <code>assertion function</code> feature of TypeScript to help the typechecker narrow the inferred types. In many cases, this significantly reduces the need to use <code>any</code>, and promotes using <code>unknown</code> instead.</p>
<p>For example:</p>
<div class="fragment"><div class="line">const u: unknown = {</div>
<div class="line">  a: &quot;value&quot;,</div>
<div class="line">  b: 12,</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line">chai.assert.typeOf(u, &quot;object&quot;);</div>
<div class="line">// u is still &quot;unknown&quot;</div>
<div class="line">chai.assert.isNotNull(u);</div>
<div class="line">// u is still &quot;unknown&quot;</div>
<div class="line">chai.assert.typeof(u.a, &quot;string&quot;);</div>
<div class="line">// TS Error (ts2571): u is &quot;unknown&quot;</div>
<div class="line"> </div>
<div class="line">import * as t from &quot;typed-assert&quot;;</div>
<div class="line"> </div>
<div class="line">t.isRecord(u);</div>
<div class="line">// u is Record&lt;string, unknown&gt;</div>
<div class="line">t.isString(u.a);</div>
<div class="line">// u.a is string</div>
<div class="line">t.isNumber(u.b);</div>
<div class="line">// u.b is number</div>
<div class="line"> </div>
<div class="line">const v: { a: string; b: number } = u;</div>
<div class="line">// no need to us `as ...`</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md21168"></a>
Usage</h2>
<p><code>typed-assert</code> comes with a set of common assertions, as well as assertion combinators and utilities.</p>
<p>See <a class="el" href="md__d_1_2_g_i_t_2_food_link_2foodlink_8client_2node__modules_2typed-assert_2_a_p_i.html">the documentation</a> for a full reference.</p>
<div class="fragment"><div class="line">import * as t from &quot;typed-assert&quot;;</div>
<div class="line"> </div>
<div class="line">// Base asserts</div>
<div class="line">t.isExactly(&quot;a&quot;, &quot;a&quot;);</div>
<div class="line">t.isNotUndefined(null);</div>
<div class="line">t.isNotNull(undefined);</div>
<div class="line"> </div>
<div class="line">// Asserts combinators</div>
<div class="line">t.isOneOf(&quot;b&quot;, [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;]);</div>
<div class="line">t.isArrayOf([2, 3, 4], t.isNumber);</div>
<div class="line"> </div>
<div class="line">// Custom composite checks</div>
<div class="line">interface ICustomType {</div>
<div class="line">  readonly a: {</div>
<div class="line">    readonly b: &quot;c&quot;;</div>
<div class="line">    readonly d: string;</div>
<div class="line">  };</div>
<div class="line">  readonly f?: number;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">function assertCustomType(input: unknown): asserts input is ICustomType {</div>
<div class="line">  t.isRecordWithKeys(input, [&quot;a&quot;, &quot;f&quot;]);</div>
<div class="line">  t.isRecordWithKeys(input.a, [&quot;b&quot;, &quot;d&quot;]);</div>
<div class="line">  t.isExactly(input.a.b, &quot;c&quot;);</div>
<div class="line">  t.isString(input.a.d);</div>
<div class="line">  t.isOption(input.f, t.isNumber);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">const v = {</div>
<div class="line">  a: {</div>
<div class="line">    b: &quot;c&quot;,</div>
<div class="line">    d: &quot;&quot;,</div>
<div class="line">  },</div>
<div class="line">};</div>
<div class="line">assertCustomType(v);</div>
</div><!-- fragment --><p>This library also comes with a combinator to transform an assertion functions into a <a href="https://www.typescriptlang.org/docs/handbook/advanced-types.html#user-defined-type-guards">type guard function</a>: </p><div class="fragment"><div class="line">const checkNumber = t.check(t.isNumber);</div>
<div class="line">checkNumber(1) === true;</div>
<div class="line">checkNumber(&quot;&quot;) === false;</div>
</div><!-- fragment --><p>It is especially convenient when combined with functional operations such as <code>Array#filter</code>: </p><div class="fragment"><div class="line">const t = [&quot;a&quot;, 3, &quot;c&quot;, 4, null, 2]</div>
<div class="line">  .filter(t.check(t.isNumber))</div>
<div class="line">  .map(x =&gt; x % 2 === 0 ? x : null) // x: number</div>
<div class="line">  .filter(t.check(t.isNotNull));</div>
<div class="line">// t: number[] = [4, 2]</div>
</div><!-- fragment --><p>To encourage using asserts when dealing with untrusted JSON input, the following function is also exported: </p><div class="fragment"><div class="line">export const safeJsonParse = (json: string): unknown =&gt;</div>
<div class="line">  JSON.parse(json) as unknown;</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md21169"></a>
Configuration</h2>
<p>This library is designed to work in the browser as well as in Node without external dependencies, and by default does not use the <code>assert</code> module from the Node stdlib, so it ships with a very basic <code>assert</code> implementation: </p><div class="fragment"><div class="line">export type WeakAssert = (input: unknown, message?: string) =&gt; void;</div>
<div class="line"> </div>
<div class="line">export const defaultAssert: WeakAssert = (condition, message) =&gt; {</div>
<div class="line">  if (!condition) {</div>
<div class="line">    throw new TypeError(message);</div>
<div class="line">  }</div>
<div class="line">};</div>
</div><!-- fragment --><p>It is however possible to configure the library to use a provided base <code>assert</code> function, such as the native <code>assert</code> module: </p><div class="fragment"><div class="line">import * as t from &quot;typed-assert&quot;;</div>
<div class="line">import nodeAssert from &quot;assert&quot;;</div>
<div class="line"> </div>
<div class="line">t.setBaseAssert(nodeAssert);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md21170"></a>
Caveats</h2>
<p>Due to limitations in the typechecker, there are syntactic restrictions in how to define and use type assertion functions. For example, you can not dynamically define an assertion function, even if it looks like a static definition.</p>
<p>Thus the following code won't compile: </p><div class="fragment"><div class="line">function createIsExactly&lt;T&gt;(value: T): (input: unknown) =&gt; asserts input is T {</div>
<div class="line">  return function isExactly(input: unknown): asserts input is T {</div>
<div class="line">    t.isExactly(input, value);</div>
<div class="line">  };</div>
<div class="line">}</div>
<div class="line">// No problem so far</div>
<div class="line"> </div>
<div class="line">createIsExactly(&quot;a&quot;)(null);</div>
<div class="line">// Won&#39;t compile:</div>
<div class="line">// Assertions require the call target to be an</div>
<div class="line">//  identifier or qualified name.ts(2776)</div>
</div><!-- fragment --><p>For similar reasons, it is not possible to use type-inferred arrow functions to define assertion functions: </p><div class="fragment"><div class="line">const isExactlyNull = (input: unknown): asserts input is null =&gt; assert(input === value);</div>
<div class="line">// No problem so far</div>
<div class="line"> </div>
<div class="line">isExactlyNull(&quot;a&quot;, null):</div>
<div class="line">// Won&#39;t compile:</div>
<div class="line">// Assertions require the call target to be an</div>
<div class="line">//  identifier or qualified name.ts(2776)</div>
</div><!-- fragment --><p>It is however possible to use arrow function with explicit typing of the left-hand operand: </p><div class="fragment"><div class="line">const isExactlyNull: (input: unknown) =&gt; asserts input is null = (input) =&gt;</div>
<div class="line">  assert(input === null);</div>
<div class="line"> </div>
<div class="line">isExactlyNull(&quot;a&quot;);</div>
<div class="line">// No problem</div>
</div><!-- fragment --><p>To simplify the implementation,</p>
<p>To simplify this pattern, this library also exports the <code>Assert&lt;Input, Output&gt;</code> type as defined below: </p><div class="fragment"><div class="line">export type Assert&lt;T&gt; = (</div>
<div class="line">  input: unknown,</div>
<div class="line">  message?: string,</div>
<div class="line">) =&gt; asserts input is T;</div>
<div class="line"> </div>
<div class="line">const isExactlyNull: Assert&lt;null&gt; = (input) =&gt; assert(input === null);</div>
<div class="line"> </div>
<div class="line">isExactlyNull(&quot;a&quot;);</div>
<div class="line">// No problem</div>
</div><!-- fragment --><p>For convenience, this library also exports the following types, used internally:</p>
<div class="fragment"><div class="line">export type WeakAssert = (input: unknown, message?: string) =&gt; void;</div>
<div class="line"> </div>
<div class="line">export type SubType&lt;Input, Output&gt; = Output extends Input ? Output : never;</div>
<div class="line"> </div>
<div class="line">export type Assert&lt;Input = unknown, Output = Input&gt; = (</div>
<div class="line">  input: Input,</div>
<div class="line">  message?: string,</div>
<div class="line">) =&gt; asserts input is SubType&lt;Input, Output&gt;;</div>
<div class="line"> </div>
<div class="line">export type Check&lt;Input = unknown, Output = Input&gt; = (</div>
<div class="line">  input: Input,</div>
<div class="line">) =&gt; input is SubType&lt;Input, Output&gt;;</div>
</div><!-- fragment --><p>This way we can write: </p><div class="fragment"><div class="line">const isExactlyNull: Assert&lt;unknown, null&gt; = (input) =&gt;</div>
<div class="line">  assert(input === null);</div>
<div class="line"> </div>
<div class="line">isExactlyNull(&quot;a&quot;);</div>
</div><!-- fragment --> </div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_2819f17ffd536c76baa6d22c695599c9.html">GIT</a></li><li class="navelem"><a class="el" href="dir_7c2f69865df6d9deb87b81146fc3b4f6.html">FoodLink</a></li><li class="navelem"><a class="el" href="dir_060908b24f206e0870efcd71814665ad.html">foodlink.client</a></li><li class="navelem"><a class="el" href="dir_083bb234fa234c64f25ac45abfe72fc3.html">node_modules</a></li><li class="navelem"><a class="el" href="dir_681ff4b63133dfce9294c3e65c3ed60a.html">typed-assert</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
