<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FoodLink: D:/GIT/FoodLink/foodlink.client/node_modules/@sigstore/sign Directory Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">FoodLink
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('dir_657603174127a0b868180b4d425bd843.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">sign Directory Reference</div></div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>A library for generating <a href="https://www.sigstore.dev">Sigstore</a> signatures.</p>
<h1><a class="anchor" id="autotoc_md1728"></a>
Features</h1>
<ul>
<li>Support for keyless signature generation with <a href="https://github.com/sigstore/fulcio">Fulcio</a>-issued signing certificates</li>
<li>Support for ambient OIDC credential detection in CI/CD environments</li>
<li>Support for recording signatures to the <a href="https://github.com/sigstore/rekor">Rekor</a> transparency log</li>
<li>Support for requesting timestamped countersignature from a <a href="https://github.com/sigstore/timestamp-authority">Timestamp Authority</a></li>
</ul>
<h1><a class="anchor" id="autotoc_md1729"></a>
Prerequisites</h1>
<ul>
<li>Node.js version &gt;= 14.17.0</li>
</ul>
<h1><a class="anchor" id="autotoc_md1730"></a>
Installation</h1>
<div class="fragment"><div class="line">npm install @sigstore/sign</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md1731"></a>
Overview</h1>
<p>This library provides the building blocks for composing custom Sigstore signing workflows.</p>
<h2><a class="anchor" id="autotoc_md1732"></a>
BundleBuilder</h2>
<p>The top-level component is the <code>BundleBuilder</code> which has responsibility for taking some artifact and returning a <a href="https://github.com/sigstore/protobuf-specs/blob/main/protos/sigstore_bundle.proto">Sigstore bundle</a> containing the signature for that artifact and the various materials necessary to verify that signature.</p>
<div class="fragment"><div class="line">interface BundleBuilder {</div>
<div class="line">  create: (artifact: Artifact) =&gt; Promise&lt;Bundle&gt;;</div>
<div class="line">}</div>
</div><!-- fragment --><p>The artifact to be signed is simply an array of bytes and an optional mimetype. The type is necessary when the signature is packaged as a <a href="https://github.com/secure-systems-lab/dsse">DSSE</a> envelope.</p>
<div class="fragment"><div class="line">type Artifact = {</div>
<div class="line">  data: Buffer;</div>
<div class="line">  type?: string;</div>
<div class="line">};</div>
</div><!-- fragment --><p>There are two <code>BundleBuilder</code> implementations provided as part of this package:</p>
<ul>
<li><a href="./src/bundler/dsse.ts"><code>DSSEBundleBuilder</code></a> - Combines the verification material and artifact signature into a <a href="https://github.com/sigstore/protobuf-specs/blob/5ef54068bb534152474c5685f5cd248f38549fbd/protos/sigstore_bundle.proto#L80"><code>dsse_envelope</code></a> -style Sigstore bundle</li>
<li><a href="./src/bundler/message.ts"><code>MessageBundleBuilder</code></a> - Combines the verification material and artifact signature into a <a href="https://github.com/sigstore/protobuf-specs/blob/5ef54068bb534152474c5685f5cd248f38549fbd/protos/sigstore_bundle.proto#L74"><code>message_signature</code></a>-style Sigstore bundle.</li>
</ul>
<h2><a class="anchor" id="autotoc_md1733"></a>
Signer</h2>
<p>Every <code>BundleBuilder</code> must be instantiated with a <code>Signer</code> implementation. The <code>Signer</code> is responsible for taking a <code>Buffer</code> and returning an <code>Signature</code>.</p>
<div class="fragment"><div class="line">interface Signer {</div>
<div class="line">  sign: (data: Buffer) =&gt; Promise&lt;Signature&gt;;</div>
<div class="line">}</div>
</div><!-- fragment --><p>The returned <code>Signature</code> contains a signature and the public key which can be used to verify that signature &ndash; the key may either take the form of a x509 certificate or public key.</p>
<div class="fragment"><div class="line">type Signature = {</div>
<div class="line">  signature: Buffer;</div>
<div class="line">  key: KeyMaterial;</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line">type KeyMaterial =</div>
<div class="line">  | {</div>
<div class="line">      $case: &#39;x509Certificate&#39;;</div>
<div class="line">      certificate: string;</div>
<div class="line">    }</div>
<div class="line">  | {</div>
<div class="line">      $case: &#39;publicKey&#39;;</div>
<div class="line">      publicKey: string;</div>
<div class="line">      hint?: string;</div>
<div class="line">    };</div>
</div><!-- fragment --><p>This package provides the <a href="./src/signer/fulcio/index.ts"><code>FulcioSigner</code></a> which implements the <code>Signer</code> interface and signs the artifact with an ephemeral keypair. It will also retrieve an OIDC token from the configured <code>IdentityProvider</code> and then request a signing certificate from Fulcio which binds the ephemeral key to the identity embedded in the token. This signing certificate is returned as part of the <code>Signature</code>.</p>
<h2><a class="anchor" id="autotoc_md1734"></a>
Witness</h2>
<p>The <code>BundleBuilder</code> may also be configured with zero-or-more <code>Witness</code> instances. Each <code>Witness</code> receives the artifact signature and the public key and returns an <code>VerificationMaterial</code> which represents some sort of counter-signature for the artifact's signature.</p>
<div class="fragment"><div class="line">interface Witness {</div>
<div class="line">  testify: (</div>
<div class="line">    signature: SignatureBundle,</div>
<div class="line">    publicKey: string</div>
<div class="line">  ) =&gt; Promise&lt;VerificationMaterial&gt;;</div>
<div class="line">}</div>
</div><!-- fragment --><p>The returned <code>VerificationMaterial</code> may contain either Rekor transparency log entries or RFC3161 timestamps.</p>
<div class="fragment"><div class="line">type VerificationMaterial = {</div>
<div class="line">  tlogEntries?: TransparencyLogEntry[];</div>
<div class="line">  rfc3161Timestamps?: RFC3161SignedTimestamp[];</div>
<div class="line">};</div>
</div><!-- fragment --><p>The entries in the returned <code>VerificationMaterial</code> are automatically added to the Sigstore <code>Bundle</code> by the <code>BundleBuilder</code>.</p>
<p>The package provides two different <code>Witness</code> implementations:</p>
<ul>
<li><a href="./src/witness/tlog/index.ts"><code>RekorWitness</code></a> - Adds an entry to the Rekor transparency log and returns a <code>TransparencyLogEntry</code> to be included in the <code>Bundle</code></li>
<li><a href="./src/witness/tsa/index.ts"><code>TSAWitness</code></a> - Requests an RFC3161 timestamp over the artifact signature and returns an <code>RFC3161SignedTimestamp</code> to be included in the <code>Bundle</code></li>
</ul>
<h1><a class="anchor" id="autotoc_md1735"></a>
Usage Example</h1>
<div class="fragment"><div class="line">const {</div>
<div class="line">  CIContextProvider,</div>
<div class="line">  DSSEBundleBuilder,</div>
<div class="line">  FulcioSigner,</div>
<div class="line">  RekorWitness,</div>
<div class="line">  TSAWitness,</div>
<div class="line">} = require(&#39;@sigstore/sign&#39;);</div>
<div class="line"> </div>
<div class="line">// Set-up the signer</div>
<div class="line">const signer = new FulcioSigner({</div>
<div class="line">  fulcioBaseURL: &#39;https://fulcio.sigstore.dev&#39;,</div>
<div class="line">  identityProvider: new CIContextProvider(&#39;sigstore&#39;),</div>
<div class="line">});</div>
<div class="line"> </div>
<div class="line">// Set-up the witnesses</div>
<div class="line">const rekorWitness = new RekorWitness({</div>
<div class="line">  rekorBaseURL: &#39;https://rekor.sigstore.dev&#39;,</div>
<div class="line">});</div>
<div class="line"> </div>
<div class="line">const tsaWitness = new TSAWitness({</div>
<div class="line">  tsaBaseURL: &#39;https://tsa.github.com&#39;,</div>
<div class="line">});</div>
<div class="line"> </div>
<div class="line">// Instantiate a bundle builder</div>
<div class="line">const bundler = new DSSEBundleBuilder({</div>
<div class="line">  signer,</div>
<div class="line">  witnesses: [rekorWitness, tsaWitness],</div>
<div class="line">});</div>
<div class="line"> </div>
<div class="line">// Sign a thing</div>
<div class="line">const artifact = {</div>
<div class="line">  type: &#39;text/plain&#39;,</div>
<div class="line">  data: Buffer.from(&#39;something to be signed&#39;),</div>
<div class="line">};</div>
<div class="line">const bundle = await bundler.create(artifact);</div>
</div><!-- fragment --> </div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_2819f17ffd536c76baa6d22c695599c9.html">GIT</a></li><li class="navelem"><a class="el" href="dir_7c2f69865df6d9deb87b81146fc3b4f6.html">FoodLink</a></li><li class="navelem"><a class="el" href="dir_060908b24f206e0870efcd71814665ad.html">foodlink.client</a></li><li class="navelem"><a class="el" href="dir_083bb234fa234c64f25ac45abfe72fc3.html">node_modules</a></li><li class="navelem"><a class="el" href="dir_eb7e23464a83eb558912bf60f88877bd.html">@sigstore</a></li><li class="navelem"><a class="el" href="dir_657603174127a0b868180b4d425bd843.html">sign</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
