\doxysection{D\+:/\+GIT/\+Food\+Link/foodlink.client/node\+\_\+modules/make-\/fetch-\/happen Directory Reference}
\hypertarget{dir_37959f1f28284ebc320c7fda43c3ac5c}{}\label{dir_37959f1f28284ebc320c7fda43c3ac5c}\index{D:/GIT/FoodLink/foodlink.client/node\_modules/make-\/fetch-\/happen Directory Reference@{D:/GIT/FoodLink/foodlink.client/node\_modules/make-\/fetch-\/happen Directory Reference}}


\doxysubsection{Detailed Description}
\href{https://npm.im/make-fetch-happen}{\texttt{ }} \href{https://npm.im/make-fetch-happen}{\texttt{ }} \href{https://travis-ci.org/npm/make-fetch-happen}{\texttt{ }} \href{https://coveralls.io/github/npm/make-fetch-happen?branch=latest}{\texttt{ }}

\href{https://github.com/npm/make-fetch-happen}{\texttt{ {\ttfamily make-\/fetch-\/happen}}} is a Node.\+js library that wraps \href{https://github.com/npm/minipass-fetch}{\texttt{ {\ttfamily minipass-\/fetch}}} with additional features \href{https://github.com/npm/minipass-fetch}{\texttt{ {\ttfamily minipass-\/fetch}}} doesn\textquotesingle{}t intend to include, including HTTP Cache support, request pooling, proxies, retries, and more!\hypertarget{README.md_autotoc_md13586}{}\doxysubsection{\texorpdfstring{Install}{Install}}\label{README.md_autotoc_md13586}
{\ttfamily \$ npm install -\/-\/save make-\/fetch-\/happen}\hypertarget{README.md_autotoc_md13587}{}\doxysubsection{\texorpdfstring{Table of Contents}{Table of Contents}}\label{README.md_autotoc_md13587}

\begin{DoxyItemize}
\item Example
\item Features
\item \doxylink{README.md_contributing}{Contributing}
\item API
\begin{DoxyItemize}
\item \`{}fetch\`{}
\item \`{}fetch.defaults\`{}
\item \`{}minipass-\/fetch\`{} options
\item \`{}make-\/fetch-\/happen\`{} options
\begin{DoxyItemize}
\item \`{}opts.cache\+Path\`{}
\item \`{}opts.cache\`{}
\item \`{}opts.cache\+Additional\+Headers\`{}
\item \`{}opts.proxy\`{}
\item \`{}opts.no\+Proxy\`{}
\item \`{}opts.ca, opts.cert, opts.key\`{}
\item \`{}opts.max\+Sockets\`{}
\item \`{}opts.retry\`{}
\item \`{}opts.on\+Retry\`{}
\item \`{}opts.integrity\`{}
\item \`{}opts.dns\`{}
\end{DoxyItemize}
\end{DoxyItemize}
\item Message From Our Sponsors
\end{DoxyItemize}\hypertarget{README.md_autotoc_md13588}{}\doxysubsubsection{\texorpdfstring{Example}{Example}}\label{README.md_autotoc_md13588}

\begin{DoxyCode}{0}
\DoxyCodeLine{const\ fetch\ =\ require('make-\/fetch-\/happen').defaults(\{}
\DoxyCodeLine{\ \ cachePath:\ './my-\/cache'\ //\ path\ where\ cache\ will\ be\ written\ (and\ read)}
\DoxyCodeLine{\})}
\DoxyCodeLine{}
\DoxyCodeLine{fetch('https://registry.npmjs.org/make-\/fetch-\/happen').then(res\ =>\ \{}
\DoxyCodeLine{\ \ return\ res.json()\ //\ download\ the\ body\ as\ JSON}
\DoxyCodeLine{\}).then(body\ =>\ \{}
\DoxyCodeLine{\ \ console.log(`got\ \$\{body.name\}\ from\ web`)}
\DoxyCodeLine{\ \ return\ fetch('https://registry.npmjs.org/make-\/fetch-\/happen',\ \{}
\DoxyCodeLine{\ \ \ \ cache:\ 'no-\/cache'\ //\ forces\ a\ conditional\ request}
\DoxyCodeLine{\ \ \})}
\DoxyCodeLine{\}).then(res\ =>\ \{}
\DoxyCodeLine{\ \ console.log(res.status)\ //\ 304!\ cache\ validated!}
\DoxyCodeLine{\ \ return\ res.json().then(body\ =>\ \{}
\DoxyCodeLine{\ \ \ \ console.log(`got\ \$\{body.name\}\ from\ cache`)}
\DoxyCodeLine{\ \ \})}
\DoxyCodeLine{\})}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md13589}{}\doxysubsubsection{\texorpdfstring{Features}{Features}}\label{README.md_autotoc_md13589}

\begin{DoxyItemize}
\item Builds around \href{https://npm.im/minipass-fetch}{\texttt{ {\ttfamily minipass-\/fetch}}} for the core \href{https://fetch.spec.whatwg.org}{\texttt{ {\ttfamily fetch} API}} implementation
\item Request pooling out of the box
\item Quite fast, really
\item Automatic HTTP-\/semantics-\/aware request retries
\item Cache-\/fallback automatic "{}offline mode"{}
\item Built-\/in request caching following full HTTP caching rules ({\ttfamily Cache-\/\+Control}, {\ttfamily ETag}, {\ttfamily 304}s, cache fallback on error, etc).
\item Node.\+js Stream support
\item Transparent gzip and deflate support
\item \href{https://developer.mozilla.org/en-US/docs/Web/Security/Subresource_Integrity}{\texttt{ Subresource Integrity}} support
\item Proxy support (http, https, socks, socks4, socks5. via \href{https://npm.im/@npmcli/agent}{\texttt{ {\ttfamily @npmcli/agent}}})
\item DNS cache (via (\href{https://npm.im/@npmcli/agent}{\texttt{ {\ttfamily @npmcli/agent}}})
\end{DoxyItemize}\hypertarget{README.md_autotoc_md13590}{}\doxysubsubsubsection{\texorpdfstring{\label{_fetch}%
 {\ttfamily \texorpdfstring{$>$}{>} fetch(uri\+Or\+Request, \mbox{[}opts\mbox{]}) -\/\texorpdfstring{$>$}{>} Promise\texorpdfstring{$<$}{<}Response\texorpdfstring{$>$}{>}}}{\label{_fetch}%
 {\ttfamily \texorpdfstring{$>$}{>} fetch(uri\+Or\+Request, \mbox{[}opts\mbox{]}) -\/\texorpdfstring{$>$}{>} Promise\texorpdfstring{$<$}{<}Response\texorpdfstring{$>$}{>}}}}\label{README.md_autotoc_md13590}
This function implements most of the \href{https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/fetch}{\texttt{ {\ttfamily fetch} API}}\+: given a {\ttfamily uri} string or a {\ttfamily Request} instance, it will fire off an http request and return a Promise containing the relevant response.

If {\ttfamily opts} is provided, the \`{}minipass-\/fetch\`{}-\/specific options will be passed to that library. There are also additional options specific to make-\/fetch-\/happen that add various features, such as HTTP caching, integrity verification, proxy support, and more.\hypertarget{README.md_autotoc_md13591}{}\doxysubsubsubsubsection{\texorpdfstring{Example}{Example}}\label{README.md_autotoc_md13591}

\begin{DoxyCode}{0}
\DoxyCodeLine{fetch('https://google.com').then(res\ =>\ res.buffer())}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md13592}{}\doxysubsubsubsection{\texorpdfstring{\label{_fetch-defaults}%
 {\ttfamily \texorpdfstring{$>$}{>} fetch.\+defaults(\mbox{[}default\+Url\mbox{]}, \mbox{[}default\+Opts\mbox{]})}}{\label{_fetch-defaults}%
 {\ttfamily \texorpdfstring{$>$}{>} fetch.\+defaults(\mbox{[}default\+Url\mbox{]}, \mbox{[}default\+Opts\mbox{]})}}}\label{README.md_autotoc_md13592}
Returns a new {\ttfamily fetch} function that will call {\ttfamily make-\/fetch-\/happen} using {\ttfamily default\+Url} and {\ttfamily default\+Opts} as default values to any calls.

A defaulted {\ttfamily fetch} will also have a {\ttfamily .defaults()} method, so they can be chained.\hypertarget{README.md_autotoc_md13593}{}\doxysubsubsubsubsection{\texorpdfstring{Example}{Example}}\label{README.md_autotoc_md13593}

\begin{DoxyCode}{0}
\DoxyCodeLine{const\ fetch\ =\ require('make-\/fetch-\/happen').defaults(\{}
\DoxyCodeLine{\ \ cachePath:\ './my-\/local-\/cache'}
\DoxyCodeLine{\})}
\DoxyCodeLine{}
\DoxyCodeLine{fetch('https://registry.npmjs.org/make-\/fetch-\/happen')\ //\ will\ always\ use\ the\ cache}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md13594}{}\doxysubsubsubsection{\texorpdfstring{\label{_minipass-fetch-options}%
 {\ttfamily \texorpdfstring{$>$}{>} minipass-\/fetch options}}{\label{_minipass-fetch-options}%
 {\ttfamily \texorpdfstring{$>$}{>} minipass-\/fetch options}}}\label{README.md_autotoc_md13594}
The following options for {\ttfamily minipass-\/fetch} are used as-\/is\+:


\begin{DoxyItemize}
\item method
\item body
\item redirect
\item follow
\item timeout
\item compress
\item size
\end{DoxyItemize}

These other options are modified or augmented by make-\/fetch-\/happen\+:


\begin{DoxyItemize}
\item headers -\/ Default {\ttfamily User-\/\+Agent} set to make-\/fetch happen. {\ttfamily Connection} is set to {\ttfamily keep-\/alive} or {\ttfamily close} automatically depending on {\ttfamily opts.\+agent}.
\end{DoxyItemize}

For more details, see \href{https://github.com/npm/minipass-fetch\#options}{\texttt{ the documentation for {\ttfamily minipass-\/fetch} itself}}.\hypertarget{README.md_autotoc_md13595}{}\doxysubsubsubsection{\texorpdfstring{\label{_extra-options}%
 {\ttfamily \texorpdfstring{$>$}{>} make-\/fetch-\/happen options}}{\label{_extra-options}%
 {\ttfamily \texorpdfstring{$>$}{>} make-\/fetch-\/happen options}}}\label{README.md_autotoc_md13595}
make-\/fetch-\/happen augments the {\ttfamily minipass-\/fetch} API with additional features available through extra options. The following extra options are available\+:


\begin{DoxyItemize}
\item \`{}opts.cache\+Path\`{} -\/ Cache target to read/write
\item \`{}opts.cache\`{} -\/ {\ttfamily fetch} cache mode. Controls cache {\itshape behavior}.
\item \`{}opts.cache\+Additional\+Headers\`{} -\/ Store additional headers in the cache
\item \`{}opts.proxy\`{} -\/ Proxy agent
\item \`{}opts.no\+Proxy\`{} -\/ Domain segments to disable proxying for.
\item \`{}opts.ca, opts.cert, opts.key, opts.strict\+SSL\`{}
\item \`{}opts.local\+Address\`{}
\item \`{}opts.max\+Sockets\`{}
\item \`{}opts.retry\`{} -\/ Request retry settings
\item \`{}opts.on\+Retry\`{} -\/ a function called whenever a retry is attempted
\item \`{}opts.integrity\`{} -\/ \href{https://developer.mozilla.org/en-US/docs/Web/Security/Subresource_Integrity}{\texttt{ Subresource Integrity}} metadata.
\item \`{}opts.dns\`{} -\/ DNS cache options
\item \`{}opts.agent\`{} -\/ http/https/proxy/socks agent options. See \href{https://npm.im/@npmcli/agent}{\texttt{ {\ttfamily @npmcli/agent}}} for more info.
\end{DoxyItemize}\hypertarget{README.md_autotoc_md13596}{}\doxysubsubsubsection{\texorpdfstring{\label{_opts-cache-path}%
 {\ttfamily \texorpdfstring{$>$}{>} opts.\+cache\+Path}}{\label{_opts-cache-path}%
 {\ttfamily \texorpdfstring{$>$}{>} opts.\+cache\+Path}}}\label{README.md_autotoc_md13596}
A string {\ttfamily Path} to be used as the cache root for \href{https://npm.im/cacache}{\texttt{ {\ttfamily cacache}}}.

{\bfseries{NOTE}}\+: Requests will not be cached unless their response bodies are consumed. You will need to use one of the {\ttfamily res.\+json()}, {\ttfamily res.\+buffer()}, etc methods on the response, or drain the {\ttfamily res.\+body} stream, in order for it to be written.

The default cache manager also adds the following headers to cached responses\+:


\begin{DoxyItemize}
\item {\ttfamily X-\/\+Local-\/\+Cache}\+: Path to the cache the content was found in
\item {\ttfamily X-\/\+Local-\/\+Cache-\/\+Key}\+: Unique cache entry key for this response
\item {\ttfamily X-\/\+Local-\/\+Cache-\/\+Mode}\+: Always {\ttfamily stream} to indicate how the response was read from cacache
\item {\ttfamily X-\/\+Local-\/\+Cache-\/\+Hash}\+: Specific integrity hash for the cached entry
\item {\ttfamily X-\/\+Local-\/\+Cache-\/\+Status}\+: One of {\ttfamily miss}, {\ttfamily hit}, {\ttfamily stale}, {\ttfamily revalidated}, {\ttfamily updated}, or {\ttfamily skip} to signal how the response was created
\item {\ttfamily X-\/\+Local-\/\+Cache-\/\+Time}\+: UTCString of the cache insertion time for the entry
\end{DoxyItemize}

Using \href{https://npm.im/cacache}{\texttt{ {\ttfamily cacache}}}, a call like this may be used to manually fetch the cached entry\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{const\ h\ =\ response.headers}
\DoxyCodeLine{cacache.get(h.get('x-\/local-\/cache'),\ h.get('x-\/local-\/cache-\/key'))}
\DoxyCodeLine{}
\DoxyCodeLine{//\ grab\ content\ only,\ directly:}
\DoxyCodeLine{cacache.get.byDigest(h.get('x-\/local-\/cache'),\ h.get('x-\/local-\/cache-\/hash'))}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md13597}{}\doxysubsubsubsubsection{\texorpdfstring{Example}{Example}}\label{README.md_autotoc_md13597}

\begin{DoxyCode}{0}
\DoxyCodeLine{fetch('https://registry.npmjs.org/make-\/fetch-\/happen',\ \{}
\DoxyCodeLine{\ \ cachePath:\ './my-\/local-\/cache'}
\DoxyCodeLine{\})\ //\ -\/>\ 200-\/level\ response\ will\ be\ written\ to\ disk}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md13598}{}\doxysubsubsubsection{\texorpdfstring{\label{_opts-cache}%
 {\ttfamily \texorpdfstring{$>$}{>} opts.\+cache}}{\label{_opts-cache}%
 {\ttfamily \texorpdfstring{$>$}{>} opts.\+cache}}}\label{README.md_autotoc_md13598}
This option follows the standard {\ttfamily fetch} API cache option. This option will do nothing if \`{}opts.cache\+Path\`{} is null. The following values are accepted (as strings)\+:


\begin{DoxyItemize}
\item {\ttfamily default} -\/ Fetch will inspect the HTTP cache on the way to the network. If there is a fresh response it will be used. If there is a stale response a conditional request will be created, and a normal request otherwise. It then updates the HTTP cache with the response. If the revalidation request fails (for example, on a 500 or if you\textquotesingle{}re offline), the stale response will be returned.
\item {\ttfamily no-\/store} -\/ Fetch behaves as if there is no HTTP cache at all.
\item {\ttfamily reload} -\/ Fetch behaves as if there is no HTTP cache on the way to the network. Ergo, it creates a normal request and updates the HTTP cache with the response.
\item {\ttfamily no-\/cache} -\/ Fetch creates a conditional request if there is a response in the HTTP cache and a normal request otherwise. It then updates the HTTP cache with the response.
\item {\ttfamily force-\/cache} -\/ Fetch uses any response in the HTTP cache matching the request, not paying attention to staleness. If there was no response, it creates a normal request and updates the HTTP cache with the response.
\item {\ttfamily only-\/if-\/cached} -\/ Fetch uses any response in the HTTP cache matching the request, not paying attention to staleness. If there was no response, it returns a network error. (Can only be used when request’s mode is "{}same-\/origin"{}. Any cached redirects will be followed assuming request’s redirect mode is "{}follow"{} and the redirects do not violate request’s mode.)
\end{DoxyItemize}

(Note\+: option descriptions are taken from \href{https://fetch.spec.whatwg.org/\#http-network-or-cache-fetch}{\texttt{ https\+://fetch.\+spec.\+whatwg.\+org/\#http-\/network-\/or-\/cache-\/fetch}})\hypertarget{README.md_autotoc_md13599}{}\doxysubsubsubsubsection{\texorpdfstring{Example}{Example}}\label{README.md_autotoc_md13599}

\begin{DoxyCode}{0}
\DoxyCodeLine{const\ fetch\ =\ require('make-\/fetch-\/happen').defaults(\{}
\DoxyCodeLine{\ \ cachePath:\ './my-\/cache'}
\DoxyCodeLine{\})}
\DoxyCodeLine{}
\DoxyCodeLine{//\ Will\ error\ with\ ENOTCACHED\ if\ we\ haven't\ already\ cached\ this\ url}
\DoxyCodeLine{fetch('https://registry.npmjs.org/make-\/fetch-\/happen',\ \{}
\DoxyCodeLine{\ \ cache:\ 'only-\/if-\/cached'}
\DoxyCodeLine{\})}
\DoxyCodeLine{}
\DoxyCodeLine{//\ Will\ refresh\ any\ local\ content\ and\ cache\ the\ new\ response}
\DoxyCodeLine{fetch('https://registry.npmjs.org/make-\/fetch-\/happen',\ \{}
\DoxyCodeLine{\ \ cache:\ 'reload'}
\DoxyCodeLine{\})}
\DoxyCodeLine{}
\DoxyCodeLine{//\ Will\ use\ any\ local\ data,\ even\ if\ stale.\ Otherwise,\ will\ hit\ network.}
\DoxyCodeLine{fetch('https://registry.npmjs.org/make-\/fetch-\/happen',\ \{}
\DoxyCodeLine{\ \ cache:\ 'force-\/cache'}
\DoxyCodeLine{\})}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md13600}{}\doxysubsubsubsection{\texorpdfstring{\label{_opts-cache-additional-headers}%
 {\ttfamily \texorpdfstring{$>$}{>} opts.\+cache\+Additional\+Headers}}{\label{_opts-cache-additional-headers}%
 {\ttfamily \texorpdfstring{$>$}{>} opts.\+cache\+Additional\+Headers}}}\label{README.md_autotoc_md13600}
The following headers are always stored in the cache when present\+:


\begin{DoxyItemize}
\item {\ttfamily cache-\/control}
\item {\ttfamily content-\/encoding}
\item {\ttfamily content-\/language}
\item {\ttfamily content-\/type}
\item {\ttfamily date}
\item {\ttfamily etag}
\item {\ttfamily expires}
\item {\ttfamily last-\/modified}
\item {\ttfamily link}
\item {\ttfamily location}
\item {\ttfamily pragma}
\item {\ttfamily vary}
\end{DoxyItemize}

This option allows a user to store additional custom headers in the cache.\hypertarget{README.md_autotoc_md13601}{}\doxysubsubsubsubsection{\texorpdfstring{Example}{Example}}\label{README.md_autotoc_md13601}

\begin{DoxyCode}{0}
\DoxyCodeLine{fetch('https://registry.npmjs.org/make-\/fetch-\/happen',\ \{}
\DoxyCodeLine{\ \ cacheAdditionalHeaders:\ ['my-\/custom-\/header'],}
\DoxyCodeLine{\})}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md13602}{}\doxysubsubsubsection{\texorpdfstring{\label{_opts-proxy}%
 {\ttfamily \texorpdfstring{$>$}{>} opts.\+proxy}}{\label{_opts-proxy}%
 {\ttfamily \texorpdfstring{$>$}{>} opts.\+proxy}}}\label{README.md_autotoc_md13602}
A string or {\ttfamily new url.\+URL()}-\/d URI to proxy through. Different Proxy handlers will be used depending on the proxy\textquotesingle{}s protocol.

Additionally, {\ttfamily process.\+env.\+HTTP\+\_\+\+PROXY}, {\ttfamily process.\+env.\+HTTPS\+\_\+\+PROXY}, and {\ttfamily process.\+env.\+PROXY} are used if present and no {\ttfamily opts.\+proxy} value is provided.

(Pending) {\ttfamily process.\+env.\+NO\+\_\+\+PROXY} may also be configured to skip proxying requests for all, or specific domains.\hypertarget{README.md_autotoc_md13603}{}\doxysubsubsubsubsection{\texorpdfstring{Example}{Example}}\label{README.md_autotoc_md13603}

\begin{DoxyCode}{0}
\DoxyCodeLine{fetch('https://registry.npmjs.org/make-\/fetch-\/happen',\ \{}
\DoxyCodeLine{\ \ proxy:\ 'https://corporate.yourcompany.proxy:4445'}
\DoxyCodeLine{\})}
\DoxyCodeLine{}
\DoxyCodeLine{fetch('https://registry.npmjs.org/make-\/fetch-\/happen',\ \{}
\DoxyCodeLine{\ \ proxy:\ \{}
\DoxyCodeLine{\ \ \ \ protocol:\ 'https:',}
\DoxyCodeLine{\ \ \ \ hostname:\ 'corporate.yourcompany.proxy',}
\DoxyCodeLine{\ \ \ \ port:\ 4445}
\DoxyCodeLine{\ \ \}}
\DoxyCodeLine{\})}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md13604}{}\doxysubsubsubsection{\texorpdfstring{\label{_opts-no-proxy}%
 {\ttfamily \texorpdfstring{$>$}{>} opts.\+no\+Proxy}}{\label{_opts-no-proxy}%
 {\ttfamily \texorpdfstring{$>$}{>} opts.\+no\+Proxy}}}\label{README.md_autotoc_md13604}
If present, should be a comma-\/separated string or an array of domain extensions that a proxy should {\itshape not} be used for.

This option may also be provided through {\ttfamily process.\+env.\+NO\+\_\+\+PROXY}.\hypertarget{README.md_autotoc_md13605}{}\doxysubsubsubsection{\texorpdfstring{\label{_https-opts}%
 {\ttfamily \texorpdfstring{$>$}{>} opts.\+ca, opts.\+cert, opts.\+key, opts.\+strict\+SSL}}{\label{_https-opts}%
 {\ttfamily \texorpdfstring{$>$}{>} opts.\+ca, opts.\+cert, opts.\+key, opts.\+strict\+SSL}}}\label{README.md_autotoc_md13605}
These values are passed in directly to the HTTPS agent and will be used for both proxied and unproxied outgoing HTTPS requests. They mostly correspond to the same options the {\ttfamily https} module accepts, which will be themselves passed to {\ttfamily tls.\+connect()}. {\ttfamily opts.\+strict\+SSL} corresponds to {\ttfamily reject\+Unauthorized}.\hypertarget{README.md_autotoc_md13606}{}\doxysubsubsubsection{\texorpdfstring{\label{_opts-local-address}%
 {\ttfamily \texorpdfstring{$>$}{>} opts.\+local\+Address}}{\label{_opts-local-address}%
 {\ttfamily \texorpdfstring{$>$}{>} opts.\+local\+Address}}}\label{README.md_autotoc_md13606}
Passed directly to {\ttfamily http} and {\ttfamily https} request calls. Determines the local address to bind to.\hypertarget{README.md_autotoc_md13607}{}\doxysubsubsubsection{\texorpdfstring{\label{_opts-max-sockets}%
 {\ttfamily \texorpdfstring{$>$}{>} opts.\+max\+Sockets}}{\label{_opts-max-sockets}%
 {\ttfamily \texorpdfstring{$>$}{>} opts.\+max\+Sockets}}}\label{README.md_autotoc_md13607}
Default\+: 15

Maximum number of active concurrent sockets to use for the underlying Http/\+Https/\+Proxy agents. This setting applies once per spawned agent.

15 is probably a {\itshape pretty good value} for most use-\/cases, and balances speed with, uh, not knocking out people\textquotesingle{}s routers. 🤓\hypertarget{README.md_autotoc_md13608}{}\doxysubsubsubsection{\texorpdfstring{\label{_opts-retry}%
 {\ttfamily \texorpdfstring{$>$}{>} opts.\+retry}}{\label{_opts-retry}%
 {\ttfamily \texorpdfstring{$>$}{>} opts.\+retry}}}\label{README.md_autotoc_md13608}
An object that can be used to tune request retry settings. Retries will only be attempted on the following conditions\+:


\begin{DoxyItemize}
\item Request method is NOT {\ttfamily POST} AND
\item Request status is one of\+: {\ttfamily 408}, {\ttfamily 420}, {\ttfamily 429}, or any status in the 500-\/range. OR
\item Request errored with {\ttfamily ECONNRESET}, {\ttfamily ECONNREFUSED}, {\ttfamily EADDRINUSE}, {\ttfamily ETIMEDOUT}, or the {\ttfamily fetch} error {\ttfamily request-\/timeout}.
\end{DoxyItemize}

The following are worth noting as explicitly not retried\+:


\begin{DoxyItemize}
\item {\ttfamily getaddrinfo ENOTFOUND} and will be assumed to be either an unreachable domain or the user will be assumed offline. If a response is cached, it will be returned immediately.
\end{DoxyItemize}

If {\ttfamily opts.\+retry} is {\ttfamily false}, it is equivalent to {\ttfamily \{retries\+: 0\}}

If {\ttfamily opts.\+retry} is a number, it is equivalent to {\ttfamily \{retries\+: num\}}

The following retry options are available if you want more control over it\+:


\begin{DoxyItemize}
\item retries
\item factor
\item min\+Timeout
\item max\+Timeout
\item randomize
\end{DoxyItemize}

For details on what each of these do, refer to the \href{https://npm.im/retry}{\texttt{ {\ttfamily retry}}} documentation.\hypertarget{README.md_autotoc_md13609}{}\doxysubsubsubsubsection{\texorpdfstring{Example}{Example}}\label{README.md_autotoc_md13609}

\begin{DoxyCode}{0}
\DoxyCodeLine{fetch('https://flaky.site.com',\ \{}
\DoxyCodeLine{\ \ retry:\ \{}
\DoxyCodeLine{\ \ \ \ retries:\ 10,}
\DoxyCodeLine{\ \ \ \ randomize:\ true}
\DoxyCodeLine{\ \ \}}
\DoxyCodeLine{\})}
\DoxyCodeLine{}
\DoxyCodeLine{fetch('http://reliable.site.com',\ \{}
\DoxyCodeLine{\ \ retry:\ false}
\DoxyCodeLine{\})}
\DoxyCodeLine{}
\DoxyCodeLine{fetch('http://one-\/more.site.com',\ \{}
\DoxyCodeLine{\ \ retry:\ 3}
\DoxyCodeLine{\})}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md13610}{}\doxysubsubsubsection{\texorpdfstring{\label{_opts-onretry}%
 {\ttfamily \texorpdfstring{$>$}{>} opts.\+on\+Retry}}{\label{_opts-onretry}%
 {\ttfamily \texorpdfstring{$>$}{>} opts.\+on\+Retry}}}\label{README.md_autotoc_md13610}
A function called with the response or error which caused the retry whenever one is attempted.\hypertarget{README.md_autotoc_md13611}{}\doxysubsubsubsubsection{\texorpdfstring{Example}{Example}}\label{README.md_autotoc_md13611}

\begin{DoxyCode}{0}
\DoxyCodeLine{fetch('https://flaky.site.com',\ \{}
\DoxyCodeLine{\ \ onRetry(cause)\ \{}
\DoxyCodeLine{\ \ \ \ console.log('we\ will\ retry\ because\ of',\ cause)}
\DoxyCodeLine{\ \ \}}
\DoxyCodeLine{\})}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md13612}{}\doxysubsubsubsection{\texorpdfstring{\label{_opts-integrity}%
 {\ttfamily \texorpdfstring{$>$}{>} opts.\+integrity}}{\label{_opts-integrity}%
 {\ttfamily \texorpdfstring{$>$}{>} opts.\+integrity}}}\label{README.md_autotoc_md13612}
Matches the response body against the given \href{https://developer.mozilla.org/en-US/docs/Web/Security/Subresource_Integrity}{\texttt{ Subresource Integrity}} metadata. If verification fails, the request will fail with an {\ttfamily EINTEGRITY} error.

{\ttfamily integrity} may either be a string or an \href{https://npm.im/ssri}{\texttt{ {\ttfamily ssri}}} {\ttfamily Integrity}-\/like.\hypertarget{README.md_autotoc_md13613}{}\doxysubsubsubsubsection{\texorpdfstring{Example}{Example}}\label{README.md_autotoc_md13613}

\begin{DoxyCode}{0}
\DoxyCodeLine{fetch('https://registry.npmjs.org/make-\/fetch-\/happen/-\//make-\/fetch-\/happen-\/1.0.0.tgz',\ \{}
\DoxyCodeLine{\ \ integrity:\ 'sha1-\/o47j7zAYnedYFn1dF/fR9OV3z8Q='}
\DoxyCodeLine{\})\ //\ -\/>\ ok}
\DoxyCodeLine{}
\DoxyCodeLine{fetch('https://malicious-\/registry.org/make-\/fetch-\/happen/-\//make-\/fetch-\/happen-\/1.0.0.tgz',\ \{}
\DoxyCodeLine{\ \ integrity:\ 'sha1-\/o47j7zAYnedYFn1dF/fR9OV3z8Q='}
\DoxyCodeLine{\})\ //\ Error:\ EINTEGRITY}

\end{DoxyCode}
 