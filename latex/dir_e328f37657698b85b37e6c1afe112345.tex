\doxysection{D\+:/\+GIT/\+Food\+Link/foodlink.client/node\+\_\+modules/cors Directory Reference}
\hypertarget{dir_e328f37657698b85b37e6c1afe112345}{}\label{dir_e328f37657698b85b37e6c1afe112345}\index{D:/GIT/FoodLink/foodlink.client/node\_modules/cors Directory Reference@{D:/GIT/FoodLink/foodlink.client/node\_modules/cors Directory Reference}}


\doxysubsection{Detailed Description}
\href{https://npmjs.org/package/cors}{\texttt{ }} \href{https://npmjs.org/package/cors}{\texttt{ }} \href{https://travis-ci.org/expressjs/cors}{\texttt{ }} \href{https://coveralls.io/r/expressjs/cors?branch=master}{\texttt{ }}

CORS is a node.\+js package for providing a \href{http://www.senchalabs.org/connect/}{\texttt{ Connect}}/\href{http://expressjs.com/}{\texttt{ Express}} middleware that can be used to enable \href{http://en.wikipedia.org/wiki/Cross-origin_resource_sharing}{\texttt{ CORS}} with various options.

{\bfseries{\href{https://twitter.com/intent/user?screen_name=troygoode}{\texttt{ Follow me (@troygoode) on Twitter!}}}}


\begin{DoxyItemize}
\item \doxylink{README.md_installation}{Installation}
\item Usage
\begin{DoxyItemize}
\item Simple Usage
\item Enable CORS for a Single Route
\item Configuring CORS
\item Configuring CORS Asynchronously
\item Enabling CORS Pre-\/\+Flight
\end{DoxyItemize}
\item Configuration Options
\item Demo
\item \doxylink{README.md_license}{License}
\item Author
\end{DoxyItemize}\hypertarget{README.md_autotoc_md4917}{}\doxysubsection{\texorpdfstring{Installation}{Installation}}\label{README.md_autotoc_md4917}
This is a \href{https://nodejs.org/en/}{\texttt{ Node.\+js}} module available through the \href{https://www.npmjs.com/}{\texttt{ npm registry}}. Installation is done using the \href{https://docs.npmjs.com/getting-started/installing-npm-packages-locally}{\texttt{ {\ttfamily npm install} command}}\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\$\ npm\ install\ cors}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md4918}{}\doxysubsection{\texorpdfstring{Usage}{Usage}}\label{README.md_autotoc_md4918}
\hypertarget{README.md_autotoc_md4919}{}\doxysubsubsection{\texorpdfstring{Simple Usage (Enable {\itshape All} CORS Requests)}{Simple Usage (Enable {\itshape All} CORS Requests)}}\label{README.md_autotoc_md4919}

\begin{DoxyCode}{0}
\DoxyCodeLine{var\ express\ =\ require('express')}
\DoxyCodeLine{var\ cors\ =\ require('cors')}
\DoxyCodeLine{var\ app\ =\ express()}
\DoxyCodeLine{}
\DoxyCodeLine{app.use(cors())}
\DoxyCodeLine{}
\DoxyCodeLine{app.get('/products/:id',\ function\ (req,\ res,\ next)\ \{}
\DoxyCodeLine{\ \ res.json(\{msg:\ 'This\ is\ CORS-\/enabled\ for\ all\ origins!'\})}
\DoxyCodeLine{\})}
\DoxyCodeLine{}
\DoxyCodeLine{app.listen(80,\ function\ ()\ \{}
\DoxyCodeLine{\ \ console.log('CORS-\/enabled\ web\ server\ listening\ on\ port\ 80')}
\DoxyCodeLine{\})}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md4920}{}\doxysubsubsection{\texorpdfstring{Enable CORS for a Single Route}{Enable CORS for a Single Route}}\label{README.md_autotoc_md4920}

\begin{DoxyCode}{0}
\DoxyCodeLine{var\ express\ =\ require('express')}
\DoxyCodeLine{var\ cors\ =\ require('cors')}
\DoxyCodeLine{var\ app\ =\ express()}
\DoxyCodeLine{}
\DoxyCodeLine{app.get('/products/:id',\ cors(),\ function\ (req,\ res,\ next)\ \{}
\DoxyCodeLine{\ \ res.json(\{msg:\ 'This\ is\ CORS-\/enabled\ for\ a\ Single\ Route'\})}
\DoxyCodeLine{\})}
\DoxyCodeLine{}
\DoxyCodeLine{app.listen(80,\ function\ ()\ \{}
\DoxyCodeLine{\ \ console.log('CORS-\/enabled\ web\ server\ listening\ on\ port\ 80')}
\DoxyCodeLine{\})}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md4921}{}\doxysubsubsection{\texorpdfstring{Configuring CORS}{Configuring CORS}}\label{README.md_autotoc_md4921}

\begin{DoxyCode}{0}
\DoxyCodeLine{var\ express\ =\ require('express')}
\DoxyCodeLine{var\ cors\ =\ require('cors')}
\DoxyCodeLine{var\ app\ =\ express()}
\DoxyCodeLine{}
\DoxyCodeLine{var\ corsOptions\ =\ \{}
\DoxyCodeLine{\ \ origin:\ 'http://example.com',}
\DoxyCodeLine{\ \ optionsSuccessStatus:\ 200\ //\ some\ legacy\ browsers\ (IE11,\ various\ SmartTVs)\ choke\ on\ 204}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{app.get('/products/:id',\ cors(corsOptions),\ function\ (req,\ res,\ next)\ \{}
\DoxyCodeLine{\ \ res.json(\{msg:\ 'This\ is\ CORS-\/enabled\ for\ only\ example.com.'\})}
\DoxyCodeLine{\})}
\DoxyCodeLine{}
\DoxyCodeLine{app.listen(80,\ function\ ()\ \{}
\DoxyCodeLine{\ \ console.log('CORS-\/enabled\ web\ server\ listening\ on\ port\ 80')}
\DoxyCodeLine{\})}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md4922}{}\doxysubsubsection{\texorpdfstring{Configuring CORS w/ Dynamic Origin}{Configuring CORS w/ Dynamic Origin}}\label{README.md_autotoc_md4922}

\begin{DoxyCode}{0}
\DoxyCodeLine{var\ express\ =\ require('express')}
\DoxyCodeLine{var\ cors\ =\ require('cors')}
\DoxyCodeLine{var\ app\ =\ express()}
\DoxyCodeLine{}
\DoxyCodeLine{var\ whitelist\ =\ ['http://example1.com',\ 'http://example2.com']}
\DoxyCodeLine{var\ corsOptions\ =\ \{}
\DoxyCodeLine{\ \ origin:\ function\ (origin,\ callback)\ \{}
\DoxyCodeLine{\ \ \ \ if\ (whitelist.indexOf(origin)\ !==\ -\/1)\ \{}
\DoxyCodeLine{\ \ \ \ \ \ callback(null,\ true)}
\DoxyCodeLine{\ \ \ \ \}\ else\ \{}
\DoxyCodeLine{\ \ \ \ \ \ callback(new\ Error('Not\ allowed\ by\ CORS'))}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{\ \ \}}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{app.get('/products/:id',\ cors(corsOptions),\ function\ (req,\ res,\ next)\ \{}
\DoxyCodeLine{\ \ res.json(\{msg:\ 'This\ is\ CORS-\/enabled\ for\ a\ whitelisted\ domain.'\})}
\DoxyCodeLine{\})}
\DoxyCodeLine{}
\DoxyCodeLine{app.listen(80,\ function\ ()\ \{}
\DoxyCodeLine{\ \ console.log('CORS-\/enabled\ web\ server\ listening\ on\ port\ 80')}
\DoxyCodeLine{\})}

\end{DoxyCode}


If you do not want to block REST tools or server-\/to-\/server requests, add a {\ttfamily !origin} check in the origin function like so\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{var\ corsOptions\ =\ \{}
\DoxyCodeLine{\ \ origin:\ function\ (origin,\ callback)\ \{}
\DoxyCodeLine{\ \ \ \ if\ (whitelist.indexOf(origin)\ !==\ -\/1\ ||\ !origin)\ \{}
\DoxyCodeLine{\ \ \ \ \ \ callback(null,\ true)}
\DoxyCodeLine{\ \ \ \ \}\ else\ \{}
\DoxyCodeLine{\ \ \ \ \ \ callback(new\ Error('Not\ allowed\ by\ CORS'))}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{\ \ \}}
\DoxyCodeLine{\}}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md4923}{}\doxysubsubsection{\texorpdfstring{Enabling CORS Pre-\/\+Flight}{Enabling CORS Pre-\/\+Flight}}\label{README.md_autotoc_md4923}
Certain CORS requests are considered \textquotesingle{}complex\textquotesingle{} and require an initial {\ttfamily OPTIONS} request (called the "{}pre-\/flight request"{}). An example of a \textquotesingle{}complex\textquotesingle{} CORS request is one that uses an HTTP verb other than GET/\+HEAD/\+POST (such as DELETE) or that uses custom headers. To enable pre-\/flighting, you must add a new OPTIONS handler for the route you want to support\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{var\ express\ =\ require('express')}
\DoxyCodeLine{var\ cors\ =\ require('cors')}
\DoxyCodeLine{var\ app\ =\ express()}
\DoxyCodeLine{}
\DoxyCodeLine{app.options('/products/:id',\ cors())\ //\ enable\ pre-\/flight\ request\ for\ DELETE\ request}
\DoxyCodeLine{app.del('/products/:id',\ cors(),\ function\ (req,\ res,\ next)\ \{}
\DoxyCodeLine{\ \ res.json(\{msg:\ 'This\ is\ CORS-\/enabled\ for\ all\ origins!'\})}
\DoxyCodeLine{\})}
\DoxyCodeLine{}
\DoxyCodeLine{app.listen(80,\ function\ ()\ \{}
\DoxyCodeLine{\ \ console.log('CORS-\/enabled\ web\ server\ listening\ on\ port\ 80')}
\DoxyCodeLine{\})}

\end{DoxyCode}


You can also enable pre-\/flight across-\/the-\/board like so\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{app.options('*',\ cors())\ //\ include\ before\ other\ routes}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md4924}{}\doxysubsubsection{\texorpdfstring{Configuring CORS Asynchronously}{Configuring CORS Asynchronously}}\label{README.md_autotoc_md4924}

\begin{DoxyCode}{0}
\DoxyCodeLine{var\ express\ =\ require('express')}
\DoxyCodeLine{var\ cors\ =\ require('cors')}
\DoxyCodeLine{var\ app\ =\ express()}
\DoxyCodeLine{}
\DoxyCodeLine{var\ whitelist\ =\ ['http://example1.com',\ 'http://example2.com']}
\DoxyCodeLine{var\ corsOptionsDelegate\ =\ function\ (req,\ callback)\ \{}
\DoxyCodeLine{\ \ var\ corsOptions;}
\DoxyCodeLine{\ \ if\ (whitelist.indexOf(req.header('Origin'))\ !==\ -\/1)\ \{}
\DoxyCodeLine{\ \ \ \ corsOptions\ =\ \{\ origin:\ true\ \}\ //\ reflect\ (enable)\ the\ requested\ origin\ in\ the\ CORS\ response}
\DoxyCodeLine{\ \ \}\ else\ \{}
\DoxyCodeLine{\ \ \ \ corsOptions\ =\ \{\ origin:\ false\ \}\ //\ disable\ CORS\ for\ this\ request}
\DoxyCodeLine{\ \ \}}
\DoxyCodeLine{\ \ callback(null,\ corsOptions)\ //\ callback\ expects\ two\ parameters:\ error\ and\ options}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{app.get('/products/:id',\ cors(corsOptionsDelegate),\ function\ (req,\ res,\ next)\ \{}
\DoxyCodeLine{\ \ res.json(\{msg:\ 'This\ is\ CORS-\/enabled\ for\ a\ whitelisted\ domain.'\})}
\DoxyCodeLine{\})}
\DoxyCodeLine{}
\DoxyCodeLine{app.listen(80,\ function\ ()\ \{}
\DoxyCodeLine{\ \ console.log('CORS-\/enabled\ web\ server\ listening\ on\ port\ 80')}
\DoxyCodeLine{\})}

\end{DoxyCode}
\hypertarget{README.md_autotoc_md4925}{}\doxysubsection{\texorpdfstring{Configuration Options}{Configuration Options}}\label{README.md_autotoc_md4925}

\begin{DoxyItemize}
\item {\ttfamily origin}\+: Configures the {\bfseries{Access-\/\+Control-\/\+Allow-\/\+Origin}} CORS header. Possible values\+:
\begin{DoxyItemize}
\item {\ttfamily Boolean} -\/ set {\ttfamily origin} to {\ttfamily true} to reflect the \href{http://tools.ietf.org/html/draft-abarth-origin-09}{\texttt{ request origin}}, as defined by `req.\+header(\textquotesingle{}Origin'){\ttfamily , or set it to}false{\ttfamily to disable CORS. -\/}String{\ttfamily -\/ set}origin{\ttfamily to a specific origin. For example if you set it to}"{}http\+://example.\+com"{}{\ttfamily only requests from "{}http\+://example.\+com"{} will be allowed. -\/}Reg\+Exp{\ttfamily -\/ set}origin{\ttfamily to a regular expression pattern which will be used to test the request origin. If it\textquotesingle{}s a match, the request origin will be reflected. For example the pattern}/example.com\$/{\ttfamily will reflect any request that is coming from an origin ending with "{}example.\+com"{}. -\/}Array{\ttfamily -\/ set}origin{\ttfamily to an array of valid origins. Each origin can be a}String{\ttfamily or a}Reg\+Exp{\ttfamily . For example}\mbox{[}"{}http\+://example1.\+com"{}, /.example2.com\$/\mbox{]}{\ttfamily will accept any request from "{}http\+://example1.\+com"{} or from a subdomain of "{}example2.\+com"{}. -\/}Function{\ttfamily -\/ set}origin{\ttfamily to a function implementing some custom logic. The function takes the request origin as the first parameter and a callback (which expects the signature}err \mbox{[}object\mbox{]}, allow \mbox{[}bool\mbox{]}{\ttfamily ) as the second. \texorpdfstring{$\ast$}{*}}methods`\+: Configures the \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}\+Access-\/\+Control-\/\+Allow-\/\+Methods\texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*} CORS header. Expects a comma-\/delimited string (ex\+: \textquotesingle{}GET,PUT,POST') or an array (ex\+: `\mbox{[}\textquotesingle{}GET', \textquotesingle{}PUT\textquotesingle{}, \textquotesingle{}POST\textquotesingle{}\mbox{]}{\ttfamily ). \texorpdfstring{$\ast$}{*}}allowed\+Headers`\+: Configures the \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}\+Access-\/\+Control-\/\+Allow-\/\+Headers\texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*} CORS header. Expects a comma-\/delimited string (ex\+: \textquotesingle{}Content-\/\+Type,Authorization') or an array (ex\+: `\mbox{[}\textquotesingle{}Content-\/\+Type', \textquotesingle{}Authorization\textquotesingle{}\mbox{]}{\ttfamily ). If not specified, defaults to reflecting the headers specified in the request\textquotesingle{}s \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}\+Access-\/\+Control-\/\+Request-\/\+Headers\texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*} header. \texorpdfstring{$\ast$}{*}}exposed\+Headers`\+: Configures the \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}\+Access-\/\+Control-\/\+Expose-\/\+Headers\texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*} CORS header. Expects a comma-\/delimited string (ex\+: \textquotesingle{}Content-\/\+Range,X-\/\+Content-\/\+Range') or an array (ex\+: `\mbox{[}\textquotesingle{}Content-\/\+Range', \textquotesingle{}X-\/\+Content-\/\+Range\textquotesingle{}\mbox{]}{\ttfamily ). If not specified, no custom headers are exposed. \texorpdfstring{$\ast$}{*}}credentials{\ttfamily \+: Configures the \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}\+Access-\/\+Control-\/\+Allow-\/\+Credentials\texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*} CORS header. Set to}true{\ttfamily to pass the header, otherwise it is omitted. \texorpdfstring{$\ast$}{*}}max\+Age{\ttfamily \+: Configures the \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}\+Access-\/\+Control-\/\+Max-\/\+Age\texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*} CORS header. Set to an integer to pass the header, otherwise it is omitted. \texorpdfstring{$\ast$}{*}}preflight\+Continue{\ttfamily \+: Pass the CORS preflight response to the next handler. \texorpdfstring{$\ast$}{*}}options\+Success\+Status{\ttfamily \+: Provides a status code to use for successful}OPTIONS{\ttfamily requests, since some legacy browsers (IE11, various Smart\+TVs) choke on}204\`{}.
\end{DoxyItemize}
\end{DoxyItemize}

The default configuration is the equivalent of\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\{}
\DoxyCodeLine{\ \ "{}origin"{}:\ "{}*"{},}
\DoxyCodeLine{\ \ "{}methods"{}:\ "{}GET,HEAD,PUT,PATCH,POST,DELETE"{},}
\DoxyCodeLine{\ \ "{}preflightContinue"{}:\ false,}
\DoxyCodeLine{\ \ "{}optionsSuccessStatus"{}:\ 204}
\DoxyCodeLine{\}}

\end{DoxyCode}


For details on the effect of each CORS header, read \href{http://www.html5rocks.com/en/tutorials/cors/}{\texttt{ this}} article on HTML5 Rocks.\hypertarget{README.md_autotoc_md4926}{}\doxysubsection{\texorpdfstring{Demo}{Demo}}\label{README.md_autotoc_md4926}
A demo that illustrates CORS working (and not working) using j\+Query is available here\+: \href{http://node-cors-client.herokuapp.com/}{\texttt{ http\+://node-\/cors-\/client.\+herokuapp.\+com/}}

Code for that demo can be found here\+:


\begin{DoxyItemize}
\item Client\+: \href{https://github.com/TroyGoode/node-cors-client}{\texttt{ https\+://github.\+com/\+Troy\+Goode/node-\/cors-\/client}}
\item Server\+: \href{https://github.com/TroyGoode/node-cors-server}{\texttt{ https\+://github.\+com/\+Troy\+Goode/node-\/cors-\/server}}
\end{DoxyItemize}\hypertarget{README.md_autotoc_md4927}{}\doxysubsection{\texorpdfstring{License}{License}}\label{README.md_autotoc_md4927}
\href{http://www.opensource.org/licenses/mit-license.php}{\texttt{ MIT License}}\hypertarget{README.md_autotoc_md4928}{}\doxysubsection{\texorpdfstring{Author}{Author}}\label{README.md_autotoc_md4928}
\href{https://github.com/TroyGoode}{\texttt{ Troy Goode}} (\href{mailto:troygoode@gmail.com}{\texttt{ troygoode@gmail.\+com}}) 